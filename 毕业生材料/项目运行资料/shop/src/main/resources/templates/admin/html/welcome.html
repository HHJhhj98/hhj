<!doctype html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <base th:href="@{/}">
    <title>欢迎页面-L-admin1.0</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi"/>
    <link rel="shortcut icon" th:href="@{static/admin/images/favicon.ico}" type="image/x-icon"/>
    <link rel="stylesheet" th:href="@{static/admin/css/font.css}">
    <link rel="stylesheet" th:href="@{static/admin/css/xadmin.css}">

    <script th:src="@{static/admin/js/echarts.min.js}"></script>
    <script th:src="@{static/admin/js/jquery.min.js}"></script>
    <script th:src="@{static/admin/lib/layui/layui.js}" charset="utf-8"></script>
    <script type="text/javascript" th:src="@{static/admin/js/xadmin.js}"></script>

    <style>
        /*默认长宽比0.75*/
    </style>
</head>
<body>
<div class="x-body layui-anim layui-anim-up">
    <blockquote class="layui-elem-quote">欢迎管理员：
        <span class="x-red" id="admin">test</span>！当前时间:<span id="datetime">2018-04-25 20:50:53</span></blockquote>
    <fieldset class="layui-elem-field">
        <legend>数据统计</legend>
        <div class="layui-field-box">
            <div class="layui-col-md12">
                <div class="layui-card">
                    <div class="layui-card-body">
                        <div class="layui-carousel x-admin-carousel x-admin-backlog" lay-anim="" lay-indicator="inside"
                             lay-arrow="none" style="width: 100%; height: 90px;">
                            <div carousel-item="">
                                <ul class="layui-row layui-col-space10 layui-this">
                                    <li class="layui-col-xs2">
                                        <a href="javascript:;" class="x-admin-backlog-body">
                                            <h3>会员数</h3>
                                            <p>
                                                <cite id="memberData">66</cite></p>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs2">
                                        <a href="javascript:;" class="x-admin-backlog-body">
                                            <h3>自提点数</h3>
                                            <p>
                                                <cite id="addressData">99</cite></p>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs2">
                                        <a href="javascript:;" class="x-admin-backlog-body">
                                            <h3>在售商品数</h3>
                                            <p>
                                                <cite id="goodsData">12</cite></p>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs2">
                                        <a href="javascript:;" class="x-admin-backlog-body">
                                            <h3>总销售额</h3>
                                            <p>
                                                <cite id="orderAmountTotal">67</cite></p>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs2">
                                        <a href="javascript:;" class="x-admin-backlog-body">
                                            <h3>今日订单数</h3>
                                            <p>
                                                <cite id="OrderNowTotal">67</cite></p>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs2">
                                        <a href="javascript:;" class="x-admin-backlog-body">
                                            <h3>总订单数</h3>
                                            <p>
                                                <cite id="OrderTotal">67</cite></p>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </fieldset>
    <fieldset class="layui-elem-field">
        <legend>系统报表</legend>
        <div id="main1" style="width: 80%;height:400px;margin-left:20px"></div>
    </fieldset>
    <fieldset class="layui-elem-field">
        <legend>系统信息</legend>
        <div class="layui-field-box">
            <table class="layui-table">
                <tbody>
                <tr>
                    <th>系统版本</th>
                    <td>0.0.210426</td>
                </tr>
                <tr>
                    <th>服务器地址</th>
                    <td>127.0.0.1</td>
                </tr>
                <tr>
                    <th>操作系统</th>
                    <td>WIN10</td>
                </tr>
                <tr>
                    <th>运行环境</th>
                    <td>Apache Tomcat 8.0</td>
                </tr>
                <tr>
                    <th>JDK版本</th>
                    <td>1.8.0_144</td>
                </tr>
                <tr>
                    <th>Redis版本</th>
                    <td>5.0.10</td>
                </tr>
                <tr>
                    <th>MYSQL版本</th>
                    <td>5.5.50</td>
                </tr>
                <tr>
                    <th>上传附件限制</th>
                    <td>2M</td>
                </tr>
                </tbody>
            </table>
        </div>
    </fieldset>
    <!--<fieldset class="layui-elem-field">-->
        <!--<legend>开发团队</legend>-->
        <!--<div class="layui-field-box">-->
            <!--<table class="layui-table">-->
                <!--<tbody>-->
                <!--<tr>-->
                    <!--<th>版权所有</th>-->
                    <!--<td>hhj-->
                        <!--&lt;!&ndash;<a href="http://#/" class='x-a' target="_blank">访问官网</a>&ndash;&gt;-->
                    <!--</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<th>开发者</th>-->
                    <!--<td>hhj(2393022053@qq.com)</td>-->
                <!--</tr>-->
                <!--</tbody>-->
            <!--</table>-->
        <!--</div>-->
    <!--</fieldset>-->
    <!--<blockquote class="layui-elem-quote layui-quote-nm">感谢layui,百度Echarts,jquery,本系统由L-admin提供技术支持。</blockquote>-->
</div>
<script>
    function getFormatDate4() {
        var nowDate = new Date();
        var year = nowDate.getFullYear();
        var month = nowDate.getMonth() + 1 < 10 ? "0" + (nowDate.getMonth() + 1) : nowDate.getMonth() + 1;
        var date = nowDate.getDate() < 10 ? "0" + nowDate.getDate() : nowDate.getDate();
        var hour = nowDate.getHours() < 10 ? "0" + nowDate.getHours() : nowDate.getHours();
        var minute = nowDate.getMinutes() < 10 ? "0" + nowDate.getMinutes() : nowDate.getMinutes();
        var second = nowDate.getSeconds() < 10 ? "0" + nowDate.getSeconds() : nowDate.getSeconds();
        return year + "-" + month + "-" + date + " " + hour + ":" + minute + ":" + second;
    }

    var admin = sessionStorage.getItem("admin");
    $("#admin").text(admin);
    $("#datetime").text(getFormatDate4());

    var data0,data1,data2,data3;
    $.ajax({
        url: '/shop/statistics/LineChart',
        headers: {
            "token": "token:PC-c4ca4238a0b923820dcc509a6f75849b-20210412090817473-554972",
            "Access-Control-Allow-Origin": "*"
        },
        type: "get",
        //data:JSON.stringify(updateid),
        contentType: 'application/json',
        success: function (resp) {
            console.log(resp.data);
            data0 = resp.data[0];
            data1= resp.data[1];
            data2= resp.data[2];
            data3= resp.data[3];
            echarts_LineChart();
        }
    });

    $.ajax({
        url: '/shop/statistics/dataStatistics',
        headers: {
            "token": "token:PC-c4ca4238a0b923820dcc509a6f75849b-20210412090817473-554972",
            "Access-Control-Allow-Origin": "*"
        },
        type: "get",
        //data:JSON.stringify(updateid),
        contentType: 'application/json',
        success: function (resp) {
            console.log(resp.data);
            $("#memberData").text(resp.data[0]);
            $("#addressData").text(resp.data[1]);
            $("#goodsData").text(resp.data[2]);
            $("#orderAmountTotal").text(resp.data[3]+"元");
            $("#OrderNowTotal").text(resp.data[4]);
            $("#OrderTotal").text(resp.data[5]);

        }
    });

    function echarts_LineChart() {
        var myChart = echarts.init(document.getElementById('main1'));
        // 指定图表的配置项和数据
        var option = {
            title: {
                text: ''
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data:['销售额','订单数','提现金额']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data:data0
            },
            yAxis: {
                type: 'value'
            },
            series: [
                {
                    name:'销售额',
                    type:'line',
                    stack: '总量',
                    data:data2
                },
                {
                    name:'订单数',
                    type:'line',
                    stack: '总量',
                    data:data1
                },
                {
                    name:'提现金额',
                    type:'line',
                    stack: '总量',
                    data:data3
                }
            ]
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    }

</script>
</body>
</html>